<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Bluetooth-remote-control by akinaru</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Bluetooth-remote-control</h1>
        <h2>Bluetooth Low Energy remote control based on NRF 51 DK board with an additional display capability</h2>
        <a href="https://github.com/akinaru/bluetooth-remote-control" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a id="bluetooth-remote-control" class="anchor" href="#bluetooth-remote-control" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Bluetooth Remote Control</h1>

<p><a href="https://akinaru.github.io/bluetooth-remote-control">https://akinaru.github.io/bluetooth-remote-control</a></p>

<p><a href="https://travis-ci.org/akinaru/bluetooth-remote-control"><img src="https://travis-ci.org/akinaru/bluetooth-remote-control.svg?branch=master" alt="Build Status"></a>
<a href="LICENSE.md"><img src="http://img.shields.io/:license-mit-blue.svg" alt="License"></a></p>

<p><a href="https://play.google.com/store/apps/details?id=com.github.akinaru.bleremote"><img src="http://www.android.com/images/brand/android_app_on_play_large.png" alt="Download Bluetooth Remote Control from Google Play"></a>
<a href="https://drone.io/github.com/akinaru/bluetooth-remote-control/files/android/app/build/outputs/apk/app-debug.apk"><img src="https://raw.githubusercontent.com/kageiit/images-host/master/badges/drone-io-badge.png" alt="Download latest debug from drone.io"></a></p>

<p>Bluetooth Low Energy remote control based on DK51 board from Nordic Semiconductor with ST7735 1.8 Oled LCD from Adafruit</p>

<h2>
<a id="features" class="anchor" href="#features" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Features</h2>

<ul>
<li>
<p>HID Service BLE over GATT for full compatibility with Android TV :</p>

<ul>
<li>keyboard control :

<ul>
<li>up / down / left / right</li>
<li>escape (back)</li>
</ul>
</li>
<li>consumer control :

<ul>
<li>AC Search</li>
<li>AC Home</li>
<li>Play/Pause (Android custom keycode) </li>
</ul>
</li>
</ul>
</li>
<li>
<p>Custom Display Service used to receive a compressed bitmap over GATT :</p>

<ul>
<li>compressed bitmap is stored temporarily on device flash &amp; removed afterward</li>
<li>bitmap format is 128*160 fastlz compressed with block of 4096 octet</li>
<li>regular characteristic write is used (not long write)</li>
</ul>
</li>
<li>
<p>Android application can be used to test :</p>

<ul>
<li>hid keys notification</li>
<li>command led states on DK51 board</li>
<li>send a bitmap to be displayed on adafruit OLED module</li>
</ul>
</li>
<li><p>works fine on Android / Android TV </p></li>
<li><p>works on Apple TV but some keycode differ (consumer control)</p></li>
<li><p>this project doesn't implement any Audio Service for Voice Search </p></li>
</ul>

<h2>
<a id="mode-1--android-testing-application" class="anchor" href="#mode-1--android-testing-application" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Mode 1 : Android testing application</h2>

<p><img src="https://github.com/akinaru/bluetooth-remote-control/raw/master/img/mode2.gif" alt="mode1"></p>

<h2>
<a id="mode-2--ble-hid-service-mode" class="anchor" href="#mode-2--ble-hid-service-mode" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Mode 2 : BLE HID Service mode</h2>

<p><img src="https://github.com/akinaru/bluetooth-remote-control/raw/master/img/mode1.gif" alt="mode2"></p>

<p>You can't combined Mode 1 &amp; Mode 2 simultaneously.</p>

<h2>
<a id="project-structure" class="anchor" href="#project-structure" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Project structure</h2>

<ul>
<li>
<b>/firmware</b> - microcontroller code written for NRF DK51 board</li>
<li>
<b>/android</b> - android application to control device</li>
</ul>

<h2>
<a id="hardware-setup" class="anchor" href="#hardware-setup" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Hardware setup</h2>

<ul>
<li>NRF51 DK board 

<ul>
<li>nrf51822 chipset based on an ARM Cortex M0 processor (128kB flash memory / 16kB RAM)</li>
</ul>
</li>
</ul>

<p><img src="https://github.com/akinaru/bluetooth-remote-control/raw/master/img/DK.jpg" alt="board"></p>

<ul>
<li>Adafruit 1.8" Color TFT Shield with Joystick</li>
</ul>

<p><img src="https://github.com/akinaru/bluetooth-remote-control/raw/master/img/adafruit_oled.jpg" alt="lcd"></p>

<h2>
<a id="hardware-installation" class="anchor" href="#hardware-installation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Hardware installation</h2>

<p><img src="https://github.com/akinaru/bluetooth-remote-control/raw/master/img/hw.jpg" alt="hw"></p>

<p><code>RST</code> is linked to <code>VDD</code></p>

<h2>
<a id="build" class="anchor" href="#build" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Build</h2>

<h3>
<a id="get-source-code" class="anchor" href="#get-source-code" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Get source code</h3>

<pre><code>git clone git@github.com:akinaru/bluetooth-remote-control.git
cd bluetooth-remote-control
git submodule update --init --recursive
</code></pre>

<h3>
<a id="configuration" class="anchor" href="#configuration" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Configuration</h3>

<ul>
<li>armgcc toolchain</li>
<li>sofdevice s130</li>
<li>nRF5 SDK 11.0.0</li>
</ul>

<h3>
<a id="setup--installation" class="anchor" href="#setup--installation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Setup / Installation</h3>

<ul>
<li><p>follow SDK/Toolchain Installation steps section of <a href="https://gist.github.com/akinaru/a38315c5fe79ec5c8c6a9ed90b8df260#installation-steps">this tutorial</a></p></li>
<li><p>specify NRF51 SDK directory with :</p></li>
</ul>

<pre><code>export NRF51_SDK_DIR=/path/to/sdk
</code></pre>

<h3>
<a id="build--flash-firmware" class="anchor" href="#build--flash-firmware" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Build &amp; flash firmware</h3>

<pre><code>cd firmware
make
make flash_softdevice
make flash
</code></pre>

<h3>
<a id="build-android-app" class="anchor" href="#build-android-app" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Build Android App</h3>

<pre><code>cd android
./gradlew build
</code></pre>

<h2>
<a id="external-library" class="anchor" href="#external-library" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>External library</h2>

<h3>
<a id="firmware" class="anchor" href="#firmware" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Firmware</h3>

<ul>
<li>NRF 51 SDK 11.0.0 : <a href="https://www.nordicsemi.com/eng/Products/Bluetooth-low-energy/nRF5-SDK">https://www.nordicsemi.com/eng/Products/Bluetooth-low-energy/nRF5-SDK</a>
</li>
<li>fastlz compression library : <a href="https://github.com/ariya/FastLZ">https://github.com/ariya/FastLZ</a>
</li>
<li>Integration of Adafruit OLED ST7735 1.8 display on NRF51 DK board : <a href="https://github.com/akinaru/adafruit-oled-st7735-dk51">https://github.com/akinaru/adafruit-oled-st7735-dk51</a>
</li>
</ul>

<h3>
<a id="android-application" class="anchor" href="#android-application" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Android application</h3>

<ul>
<li>Android crop image library : <a href="https://github.com/lvillani/android-cropimage">https://github.com/lvillani/android-cropimage</a>
</li>
<li>Simple vertical and horizontal color picker : <a href="https://github.com/DASAR/ShiftColorPicker">https://github.com/DASAR/ShiftColorPicker</a>
</li>
<li>fastlz compression library : <a href="https://github.com/ariya/FastLZ">https://github.com/ariya/FastLZ</a>
</li>
<li>appcompat-v7, design &amp; recyclerview-v7</li>
</ul>

<h3>
<a id="external-links" class="anchor" href="#external-links" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>External links</h3>

<ul>
<li>USB HID keycode : <a href="http://www.freebsddiary.org/APC/usb_hid_usages.php">http://www.freebsddiary.org/APC/usb_hid_usages.php</a>
</li>
<li>Android HID keycode/keyevent mapping : <a href="https://source.android.com/devices/input/keyboard-devices.html">https://source.android.com/devices/input/keyboard-devices.html</a>
</li>
</ul>

<h2>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>License</h2>

<p>The MIT License (MIT) Copyright (c) 2016 Bertrand Martel</p>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/akinaru/bluetooth-remote-control/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/akinaru/bluetooth-remote-control/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/akinaru/bluetooth-remote-control"></a> is maintained by <a href="https://github.com/akinaru">akinaru</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>
